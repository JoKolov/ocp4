
{% extends "JNiDefaultBundle::layout.html.twig" %}

{% block title %}
 	Billetterie - {{ parent() }}
{% endblock %}

{% block body %}
	<h3>Réservation de billets d'entrée</h3>

	{% for message in app.session.flashbag.get('success') %}
		<p class="alert alert-success">{{ message }}</p>
	{% endfor %}

	{% if invoice %}
		<div class="well">
			<p>Date : {{ invoice.date|date('d/m/Y') }}</p>
			<p>Email : {{ invoice.email }}</p>
			<p>Visiteurs enregistrés :</p>
			<ul>
			{% for visitor in invoice.visitors %}
				<li>{{ visitor.firstName }} {{ visitor.lastName }}, né(e) le {{ visitor.age }} ans :: {{ visitor.admissionRate }} {{ currency }}</li>
			{% endfor %}
			</ul>
		</div>
	{% else %}
		<p>aucune réservation enregistrée</p>
	{% endif %}
	

	{# formulaire stripe #}
	<form action="#" method="POST">
		<script
			src="https://checkout.stripe.com/checkout.js" class="stripe-button"
			data-key="{{ stripePublicKey }}"
			data-amount="{{ amount }}"
			data-name="Stripe.com"
			data-description="Widget"
			data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
			data-locale="auto"
			data-zip-code="true"
		    data-currency="{{ currency }}">
		</script>
	</form>

{% endblock %}